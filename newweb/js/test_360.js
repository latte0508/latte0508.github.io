!function(){var e={359:function(e,t,n){"use strict";n.r(t);const{EventDispatcher:o,MOUSE:a,Quaternion:i,Spherical:r,TOUCH:s,Vector2:c,Vector3:l}=THREE,d={type:"change"},u={type:"start"},m={type:"end"};THREE.OrbitControls=class extends o{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new l,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:a.ROTATE,MIDDLE:a.DOLLY,RIGHT:a.PAN},this.touches={ONE:s.ROTATE,TWO:s.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Q),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(d),n.update(),p=o.NONE},this.update=function(){const t=new l,a=(new i).setFromUnitVectors(e.up,new l(0,1,0)),r=a.clone().invert(),s=new l,c=new i,u=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(a),b.setFromVector3(t),n.autoRotate&&p===o.NONE&&k(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(b.theta+=f.theta*n.dampingFactor,b.phi+=f.phi*n.dampingFactor):(b.theta+=f.theta,b.phi+=f.phi);let i=n.minAzimuthAngle,l=n.maxAzimuthAngle;return isFinite(i)&&isFinite(l)&&(i<-Math.PI?i+=u:i>Math.PI&&(i-=u),l<-Math.PI?l+=u:l>Math.PI&&(l-=u),b.theta=i<=l?Math.max(i,Math.min(l,b.theta)):b.theta>(i+l)/2?Math.max(i,b.theta):Math.min(l,b.theta)),b.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=E,b.radius=Math.max(n.minDistance,Math.min(n.maxDistance,b.radius)),!0===n.enableDamping?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),t.setFromSpherical(b),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),g.set(0,0,0)),E=1,!!(y||s.distanceToSquared(n.object.position)>h||8*(1-c.dot(n.object.quaternion))>h)&&(n.dispatchEvent(d),s.copy(n.object.position),c.copy(n.object.quaternion),y=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",J),n.domElement.removeEventListener("pointerdown",q),n.domElement.removeEventListener("pointercancel",G),n.domElement.removeEventListener("wheel",W),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",G),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",Q),n._domElementKeyEvents=null)};const n=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let p=o.NONE;const h=1e-6,b=new r,f=new r;let E=1;const g=new l;let y=!1;const v=new c,A=new c,P=new c,R=new c,O=new c,T=new c,S=new c,M=new c,x=new c,w=[],L={};function j(){return Math.pow(.95,n.zoomSpeed)}function k(e){f.theta-=e}function D(e){f.phi-=e}const N=function(){const e=new l;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),g.add(e)}}(),H=function(){const e=new l;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),I=function(){const e=new l;return function(t,o){const a=n.domElement;if(n.object.isPerspectiveCamera){const i=n.object.position;e.copy(i).sub(n.target);let r=e.length();r*=Math.tan(n.object.fov/2*Math.PI/180),N(2*t*r/a.clientHeight,n.object.matrix),H(2*o*r/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),H(o*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function C(e){n.object.isPerspectiveCamera?E/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(e){n.object.isPerspectiveCamera?E*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function _(e){v.set(e.clientX,e.clientY)}function z(e){R.set(e.clientX,e.clientY)}function F(){if(1===w.length)v.set(w[0].pageX,w[0].pageY);else{const e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);v.set(e,t)}}function K(){if(1===w.length)R.set(w[0].pageX,w[0].pageY);else{const e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);R.set(e,t)}}function Z(){const e=w[0].pageX-w[1].pageX,t=w[0].pageY-w[1].pageY,n=Math.sqrt(e*e+t*t);S.set(0,n)}function V(e){if(1==w.length)A.set(e.pageX,e.pageY);else{const t=ee(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);A.set(n,o)}P.subVectors(A,v).multiplyScalar(n.rotateSpeed);const t=n.domElement;k(2*Math.PI*P.x/t.clientHeight),D(2*Math.PI*P.y/t.clientHeight),v.copy(A)}function U(e){if(1===w.length)O.set(e.pageX,e.pageY);else{const t=ee(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);O.set(n,o)}T.subVectors(O,R).multiplyScalar(n.panSpeed),I(T.x,T.y),R.copy(O)}function X(e){const t=ee(e),o=e.pageX-t.x,a=e.pageY-t.y,i=Math.sqrt(o*o+a*a);M.set(0,i),x.set(0,Math.pow(M.y/S.y,n.zoomSpeed)),C(x.y),S.copy(M)}function q(e){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",B),n.domElement.addEventListener("pointerup",G)),function(e){w.push(e)}(e),"touch"===e.pointerType?function(e){switch($(e),w.length){case 1:switch(n.touches.ONE){case s.ROTATE:if(!1===n.enableRotate)return;F(),p=o.TOUCH_ROTATE;break;case s.PAN:if(!1===n.enablePan)return;K(),p=o.TOUCH_PAN;break;default:p=o.NONE}break;case 2:switch(n.touches.TWO){case s.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Z(),n.enablePan&&K(),p=o.TOUCH_DOLLY_PAN;break;case s.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Z(),n.enableRotate&&F(),p=o.TOUCH_DOLLY_ROTATE;break;default:p=o.NONE}break;default:p=o.NONE}p!==o.NONE&&n.dispatchEvent(u)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case a.DOLLY:if(!1===n.enableZoom)return;!function(e){S.set(e.clientX,e.clientY)}(e),p=o.DOLLY;break;case a.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;z(e),p=o.PAN}else{if(!1===n.enableRotate)return;_(e),p=o.ROTATE}break;case a.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;_(e),p=o.ROTATE}else{if(!1===n.enablePan)return;z(e),p=o.PAN}break;default:p=o.NONE}p!==o.NONE&&n.dispatchEvent(u)}(e))}function B(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch($(e),p){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;U(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&X(e),n.enablePan&&U(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&X(e),n.enableRotate&&V(e)}(e),n.update();break;default:p=o.NONE}}(e):function(e){switch(p){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),P.subVectors(A,v).multiplyScalar(n.rotateSpeed);const t=n.domElement;k(2*Math.PI*P.x/t.clientHeight),D(2*Math.PI*P.y/t.clientHeight),v.copy(A),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),x.subVectors(M,S),x.y>0?C(j()):x.y<0&&Y(j()),S.copy(M),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){O.set(e.clientX,e.clientY),T.subVectors(O,R).multiplyScalar(n.panSpeed),I(T.x,T.y),R.copy(O),n.update()}(e)}}(e))}function G(e){!function(e){delete L[e.pointerId];for(let t=0;t<w.length;t++)if(w[t].pointerId==e.pointerId)return void w.splice(t,1)}(e),0===w.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",B),n.domElement.removeEventListener("pointerup",G)),n.dispatchEvent(m),p=o.NONE}function W(e){!1!==n.enabled&&!1!==n.enableZoom&&p===o.NONE&&(e.preventDefault(),n.dispatchEvent(u),function(e){e.deltaY<0?Y(j()):e.deltaY>0&&C(j()),n.update()}(e),n.dispatchEvent(m))}function Q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?D(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?D(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?k(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?k(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):I(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function $(e){let t=L[e.pointerId];void 0===t&&(t=new c,L[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ee(e){const t=e.pointerId===w[0].pointerId?w[1]:w[0];return L[t.pointerId]}n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",q),n.domElement.addEventListener("pointercancel",G),n.domElement.addEventListener("wheel",W,{passive:!1}),this.update()}};var p=AFRAME.utils.bind;AFRAME.registerComponent("orbit-controls",{dependencies:["camera"],schema:{autoRotate:{type:"boolean"},autoRotateSpeed:{default:2},dampingFactor:{default:.1},enabled:{default:!0},enableDamping:{default:!0},enableKeys:{default:!0},enablePan:{default:!0},enableRotate:{default:!0},enableZoom:{default:!0},initialPosition:{type:"vec3"},keyPanSpeed:{default:7},minAzimuthAngle:{type:"number",default:-1/0},maxAzimuthAngle:{type:"number",default:1/0},maxDistance:{default:1e3},maxPolarAngle:{default:AFRAME.utils.device.isMobile()?90:120},minDistance:{default:1},minPolarAngle:{default:0},minZoom:{default:0},panSpeed:{default:1},rotateSpeed:{default:.05},screenSpacePanning:{default:!1},target:{type:"vec3"},zoomSpeed:{default:.5}},init:function(){var e=this.el;this.oldPosition=new THREE.Vector3,this.bindMethods(),e.sceneEl.addEventListener("enter-vr",this.onEnterVR),e.sceneEl.addEventListener("exit-vr",this.onExitVR),document.body.style.cursor="grab",document.addEventListener("mousedown",(()=>{document.body.style.cursor="grabbing"})),document.addEventListener("mouseup",(()=>{document.body.style.cursor="grab"})),this.target=new THREE.Vector3,e.getObject3D("camera").position.copy(this.data.initialPosition)},pause:function(){this.controls.dispose()},play:function(){const e=this.el;this.controls=new THREE.OrbitControls(e.getObject3D("camera"),e.sceneEl.renderer.domElement),this.update(),this.controls.saveState()},onEnterVR:function(){var e=this.el;(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!1,e.hasAttribute("look-controls")&&(e.setAttribute("look-controls","enabled",!0),this.oldPosition.copy(e.getObject3D("camera").position),e.getObject3D("camera").position.set(0,0,0)))},onExitVR:function(){var e=this.el;(AFRAME.utils.device.checkHeadsetConnected()||AFRAME.utils.device.isMobile())&&(this.controls.enabled=!0,e.getObject3D("camera").position.copy(this.oldPosition),e.hasAttribute("look-controls")&&e.setAttribute("look-controls","enabled",!1))},bindMethods:function(){this.onEnterVR=p(this.onEnterVR,this),this.onExitVR=p(this.onExitVR,this)},update:function(e){var t=this.controls,n=this.data;t&&(t.target=this.target.copy(n.target),t.autoRotate=n.autoRotate,t.autoRotateSpeed=n.autoRotateSpeed,t.dampingFactor=n.dampingFactor,t.enabled=n.enabled,t.enableDamping=n.enableDamping,t.enableKeys=n.enableKeys,t.enablePan=n.enablePan,t.enableRotate=n.enableRotate,t.enableZoom=n.enableZoom,t.keyPanSpeed=n.keyPanSpeed,t.maxPolarAngle=THREE.MathUtils.degToRad(n.maxPolarAngle),t.maxAzimuthAngle=THREE.MathUtils.degToRad(n.maxAzimuthAngle),t.maxDistance=n.maxDistance,t.minDistance=n.minDistance,t.minPolarAngle=THREE.MathUtils.degToRad(n.minPolarAngle),t.minAzimuthAngle=THREE.MathUtils.degToRad(n.minAzimuthAngle),t.minZoom=n.minZoom,t.panSpeed=n.panSpeed,t.rotateSpeed=n.rotateSpeed,t.screenSpacePanning=n.screenSpacePanning,t.zoomSpeed=n.zoomSpeed)},tick:function(){var e=this.controls;this.data.enabled&&e.enabled&&(e.enableDamping||e.autoRotate)&&this.controls.update()},remove:function(){this.controls.reset(),this.controls.dispose(),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.removeEventListener("exit-vr",this.onExitVR)}})},466:function(e){var t;e.exports=((t=function(){function e(e){return a.appendChild(e.dom),e}function n(e){for(var t=0;t<a.children.length;t++)a.children[t].style.display=t===e?"block":"none";o=e}var o=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",(function(e){e.preventDefault(),n(++o%a.children.length)}),!1);var i=(performance||Date).now(),r=i,s=0,c=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:a,addPanel:e,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-i,200),e>r+1e3&&(c.update(1e3*s/(e-r),100),r=e,s=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:a,setMode:n}}).Panel=function(e,t,n){var o=1/0,a=0,i=Math.round,r=i(window.devicePixelRatio||1),s=80*r,c=48*r,l=3*r,d=2*r,u=3*r,m=15*r,p=74*r,h=30*r,b=document.createElement("canvas");b.width=s,b.height=c,b.style.cssText="width:80px;height:48px";var f=b.getContext("2d");return f.font="bold "+9*r+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=n,f.fillRect(0,0,s,c),f.fillStyle=t,f.fillText(e,l,d),f.fillRect(u,m,p,h),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u,m,p,h),{dom:b,update:function(c,E){o=Math.min(o,c),a=Math.max(a,c),f.fillStyle=n,f.globalAlpha=1,f.fillRect(0,0,s,m),f.fillStyle=t,f.fillText(i(c)+" "+e+" ("+i(o)+"-"+i(a)+")",l,d),f.drawImage(b,u+r,m,p-r,h,u,m,p-r,h),f.fillRect(u+p-r,m,r,h),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u+p-r,m,r,i((1-c/E)*h))}}},t)}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=n(466),t=n.n(e);n(359),document.addEventListener("DOMContentLoaded",(function(){document.querySelector("a-scene").setAttribute("load-complete","")}));const o=new(t());document.getElementById("stats-container").appendChild(o.dom),AFRAME.registerComponent("load-complete",{init:function(){document.querySelector("#scene"),document.querySelector("#basic_light"),document.querySelector("#basic_camera"),document.querySelector("#sphere_360");!function e(){o.update(),requestAnimationFrame(e)}()}});const a=document.querySelector("#sphere_360"),i=document.getElementById("changesky");let r=0;i.addEventListener("mousedown",(function(){r=(r+1)%13,a.setAttribute("src","#sky"+r),a.setAttribute("displacement-map","#depthmap"+r)})),i.addEventListener("touchstart",(function(){r=(r+1)%13,a.setAttribute("src","#sky"+r),a.setAttribute("displacement-map","#depthmap"+r)}))}()}();
//# sourceMappingURL=test_360.js.map